{% extends 'base.html' %}
{% load static %}

{% block main %}
	<!-- ********************************************************************************************** -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	<!-- ********************************************************************************************** -->
<div class="container-xl">

    <h2>Pagamentos</h2>
    <hr>
  {% if messages %}
    {% for message in messages %}
        <div class="alert {{ message.tags }}" role="alert">
            {{ message }}
        </div>
    {% endfor %}
  {% endif %}

  <!--INÍCIO dos Botões -->

  <!-- INICIO botões de pagamentos  -->
  <div class="mt-4">
    <div class="card">
      <h5 class="card-header">Contas</h5>
      <div class="card-body">
        <a href="lista-pagamentos/" class="btn btn-info">Ver todos pagamentos</a>
          <a href="/pagamentos/fluxo-entradas-saidas/" class="btn btn-info">Fluxo</a>

          <a href="cadastrar-pagamento/" class="btn btn-primary">+ Adicionar pagamento </a>
          <a href="exportar-csv/" class="btn btn-info" title="Exportar CSV"><i class="fas fa-file-csv"></i></a>

          <a href="exportar-excel/">Exportar Excel</a>
      </div>
    </div>
  </div>
  <!-- INICIO botões de pagamentos  -->












      <!--INÍCIO Custos mês atual -->
      <div class="card shadow  border-0 mt-4">
        <div class="card-body">
          <h5 class="card-title">Custos mês atual </h5>
          <div class="row">
            <div class="col shadow">
              Veículos
              <h6>R$: {{ veiculosMesAtual.total}}</h6>
            </div>
            <div class="col shadow">
              Funcionários
              <h6>R$: {{ funcionariosMesAtual.total}}</h6>
            </div>
            <div class="col shadow">
              Alimentação
              <h6>R$: {{ alimentacaoMesAtual.total}}</h6>
            </div>
            <div class="col shadow">
              Links
              <h6>R$: {{ linksMesAtual.total}}</h6>
            </div>
            <div class="col shadow">
              Locação
              <h6>R$: {{ locacaoMesAtual.total}}</h6>
            </div>
            <div class="col shadow">
              Instalação
              <h6>R$: {{ instalacaoMesAtual.total}}</h6>
            </div>
            <div class="col shadow">
              Sócios
              <h6>R$: {{ sociosMesAtual.total}}</h6>
            </div>
            <div class="col shadow">
              Impostos
              <h6>R$: {{ ImpostosMesAtual.total}}</h6>
            </div>
          </div>
        </div>
      </div>
      <!--FIM Custos mês atual -->




  <!--INÍCIO Custos total mensais-->
  
  <div class="card shadow  border-0 mt-4">
    <div class="card-body">
      <h5 class="card-title">Custos Total por Mês</h5>
      <div class="row row-cols-1 row-cols-md-5 g-4">
        {% for mes in mes %}
        <div class="col mt-2 " >
          <div class="card border border-danger">
            <div class="card-body" align="center">
              {{ mes.month|date:'F Y' }}: R$: ({{ mes.c }})

            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>


  
  <!--
  <div class="card shadow  border-0 mt-4">
    <div class="card-body">
      <h5 class="card-title">Custos Total por Mês</h5>
      {% for mes in mes %}
        <div class="row">
          <div class="card">
            {{ mes.month|date:'F Y' }}: R$: ({{ mes.c }}) 
          </div>
        </div>
       {% endfor %}
    </div>
  </div>
  -->
  <!--FIM Custos total mensais-->



  <!--INÍCIO Custos total mensais-->
  <div class="card shadow  border-0 mt-4">
    <div class="card-body">
      <h5 class="card-title">Custos Total por Mês</h5>
      <div id="chart">
        <div id="timeline-chartMensais">
          <script>
          var options = {
                    series: [{
                      name: "Mensais",
                      data: [{% for mes in mes %} '{{ mes.c }}', {% endfor %}]
    
                      
                  }],
                    chart: {
                    height: 200,
                    type: 'line',
                    zoom: {
                      enabled: false
                    }
                  },
                  dataLabels: {
                    enabled: false
                  },
                  stroke: {
                    curve: 'straight'
                  },
                  title: {
                    text: '',
                    align: 'left'
                  },
                  grid: {
                    row: {
                      colors: ['#f5f5f5', 'transparent'],
                      opacity: 0.5
                    },
                  },
                  xaxis: {
                    categories: [{% for mes in mes %} '{{ mes.month|date:'F Y' }}', {% endfor %}],
                  }
                  };
                  var chart = new ApexCharts(document.querySelector("#chart"), options);
                  chart.render();
      
          </script>
        </div>
      </div>
    </div>
  </div>

  <!--FIM Custos total mensais-->
    <hr>  


    <hr>

    <!-- CUSTOS MENSAIS TOTAIS-->
    <div>
      <h6>Valores de custos Mensais</h6>
      
    </div>

  
    <div class="table-responsive">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th scope="col">Veiculos</th>
            <th scope="col">Funcionários</th>
            <th scope="col">Alimentação</th>
            <th scope="col">Links</th>
            <th scope="col">Locação</th>
            <th scope="col">Instalaçao</th>
            <th scope="col">Sócios</th>
            <th scope="col">Impostos</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              {% for veiculos in mensalVeiculos %}
                <div class="card mt-1 border border-danger border-start-0" align="center">
                  {{ veiculos.month|date:'M, Y'}}:<br> <strong>R$: {{ veiculos.c }}</strong>
                </div>
              {% endfor %}
            </td>
  
            <td>
              {% for veiculos in mensalFuncionarios %}
                <div class="card mt-1 border border-danger border-start-0" align="center">
                  {{ veiculos.month|date:'M, Y'}}:<br> <strong>R$: {{ veiculos.c }}</strong>
                </div>
              {% endfor %}
            </td>
  
            <td>
              {% for veiculos in mensalAlimentacao %}
              <div class="card mt-1 border border-danger border-start-0" align="center">
                {{ veiculos.month|date:'M, Y'}}:<br> <strong>R$: {{ veiculos.c }}</strong>
              </div>
              {% endfor %}
            </td>
  
            <td>
              {% for veiculos in mensalLinks %}
                <div class="card mt-1 border border-danger border-start-0" align="center">
                  {{ veiculos.month|date:'M, Y'}}:<br> <strong>R$: {{ veiculos.c }}</strong>
                </div>
              {% endfor %}
            </td>
  
            <td>
              {% for veiculos in mensalLocacao %}
              <div class="card mt-1 border border-danger border-start-0" align="center">
                {{ veiculos.month|date:'M, Y'}}:<br> <strong>R$: {{ veiculos.c }}</strong>
              </div>
              {% endfor %}
            </td>
  
            <td>
              {% for veiculos in mensalInstalacao %}
              <div class="card mt-1 border border-danger border-start-0" align="center">
                {{ veiculos.month|date:'M, Y'}}:<br> <strong>R$: {{ veiculos.c }}</strong>
              </div>
              {% endfor %}
            </td>
  
            <td>
              {% for veiculos in mensalSocios %}
              <div class="card mt-1 border border-danger border-start-0" align="center">
                {{ veiculos.month|date:'M, Y'}}:<br> <strong>R$: {{ veiculos.c }}</strong>
              </div>
              {% endfor %}
            </td>

            <td>
              {% for veiculos in mensalImpostos %}
              <div class="card mt-1 border border-danger border-start-0" align="center">
                {{ veiculos.month|date:'M, Y'}}:<br> <strong>R$: {{ veiculos.c }}</strong>
              </div>
              {% endfor %}
            </td>
          </tr>
        </tbody>
      </table>
    </div>


<canvas id="myChart" width="400" height="70"></canvas>
					<script>
						var ctx = document.getElementById('myChart').getContext('2d');
						var chart = new Chart(ctx, {
							// The type of chart we want to create
							type: 'bar',
							// The data for our dataset
							data: {
								labels: [
                  'Veículos',
									'',
									'Funcionários',
									'',
									'Aliementação',
									'',
									'Links',
									'',
									'Locação',
									'',
									'Instalação',
									'',
									'Sócios'
		          ],
								datasets: [{
									label: 'Custos por grupo',
									backgroundColor: 'rgb(0,0,128)',
									borderColor: 'rgb(0,0,128)',
									data: [
                    {{ veiculos.total }},
										{{ funcionarios.total }},
										{{ alimentacao.total }},
										{{ links.total }},
										{{ locacao.total }},
										{{ instalacao.total }},
										{{ socios.total }}
										
                  ]
								}]
							},
							// Configuration options go here
							options: {}
						});
					</script>

        <hr>
        <hr>













<!--






    </div>






<hr>
<hr>



    








      </div>
    </div>













  
<hr>


</div>
</div>
{% endblock %}