{% extends 'base.html' %}
{% load static %}

{% block main %}
	<!-- ********************************************************************************************** -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	<!-- ********************************************************************************************** -->
<div class="container">

    <h2>Pagamentos</h2>
  {% if messages %}
    {% for message in messages %}
        <div class="alert {{ message.tags }}" role="alert">
            {{ message }}
        </div>
    {% endfor %}
  {% endif %}
    <hr>
    <hr>
    <div align="right">
        <a href="lista-pagamentos/" class="btn btn-info">Ver todos pagamentos</a>
        <a href="agendar-pagamento/" class="btn btn-dark">Agendar um pagamento</a>
        <a href="agendamentos-pagamentos/" class="btn btn-primary">Agenda de pagamentos </a>
        <a href="cadastrar-pagamento/" class="btn btn-primary">+ Adicionar pagamento </a>
    </div>

    <hr>
    <hr>

    <!-- CUSTOS MENSAIS TOTAIS-->
    
    <div>
      <h6>Valores de custos Mensais</h6>
      {% for mes in mes %}
        {{ mes.month|date:'F Y' }}: {{ mes.c }}<br>
      {% endfor %}
    
    </div>
    
        <!-- ********************************************************************************************** -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
        <!-- ********************************************************************************************** -->
          <section>
            <div class="card-deck mt-4">
              <div class="card border-0">
                <div>
                  <h4>Valores de custos Mensais</h4>
                  <hr>
                    </a>
                  </h2>
                </div>
                <div class="card-body border-0" align="center">
          
                  <canvas id="myChartB" width="400" height="80"></canvas>
                    <script>
                      var ctx = document.getElementById('myChartB').getContext('2d');
                      var chart = new Chart(ctx, {
                        // The type of chart we want to create
                        type: 'bar',
                        // The data for our dataset
                        data: {
                          labels: [
                            {% for mes in mes %}
                            '{{ mes.month|date:"F Y" }}',
                            {% endfor %}
                            ],
                          datasets: [{
                            label: 'Valores de custos Mensais',
                            backgroundColor: 'rgb(255,0,0)',
                            borderColor: 'rgb(255,0,0)',
                            data: [
                            {% for mes in mes %}
                            '{{ mes.c }}',
                            {% endfor %}
                              ]
                          }]
                        },
                        // Configuration options go here
                        options: {}
                      });
                    </script>
              </div>
            </div>
          </section>
  
          


        




    <table class="table table-bordered">
  <thead>
    <tr>
      <th scope="col">Veiculos</th>
      <th scope="col">Funcionários</th>
      <th scope="col">Alimentação</th>
      <th scope="col">Links</th>
      <th scope="col">Locação</th>
      <th scope="col">Instalaçao</th>
      <th scope="col">Sócios</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1
      {% for veiculos in mensalVeiculos %}
        {{ veiculos.month|date:'F Y'}}: {{ veiculos.c }}<br>
      {% endfor %}
      </td>

      <td>
      {% for veiculos in mensalFuncionarios %}
        {{ veiculos.month|date:'F Y'}}: {{ veiculos.c }}<br>
      {% endfor %}
      </td>

      <td>
        {% for veiculos in mensalAlimentacao %}
        {{ veiculos.month|date:'F Y'}}: {{ veiculos.c }}<br>
      {% endfor %}
      </td>

      <td>{% for veiculos in mensalLinks %}
        {{ veiculos.month|date:'F Y'}}: {{ veiculos.c }}<br>
      {% endfor %}
    </td>

      <td>
        {% for veiculos in mensalLocacao %}
        {{ veiculos.month|date:'F Y'}}: {{ veiculos.c }}<br>
      {% endfor %}
      </td>

      <td>{% for veiculos in mensalInstalacao %}
        {{ veiculos.month|date:'F Y'}}: {{ veiculos.c }}<br>
      {% endfor %}
    </td>

      <td>{% for veiculos in mensalSocios %}
        {{ veiculos.month|date:'F Y'}}: {{ veiculos.c }}<br>
      {% endfor %}
    </td>
    </tr>


  </tbody>
</table>


<canvas id="myChart" width="400" height="70"></canvas>
					<script>
						var ctx = document.getElementById('myChart').getContext('2d');
						var chart = new Chart(ctx, {
							// The type of chart we want to create
							type: 'bar',
							// The data for our dataset
							data: {
								labels: [
                  'Veículos',
									'',
									'Funcionários',
									'',
									'Aliementação',
									'',
									'Links',
									'',
									'Locação',
									'',
									'Instalação',
									'',
									'Sócios'
		          ],
								datasets: [{
									label: 'Custos por grupo',
									backgroundColor: 'rgb(0,0,128)',
									borderColor: 'rgb(0,0,128)',
									data: [
                    {{ veiculos.total }},
										{{ funcionarios.total }},
										{{ alimentacao.total }},
										{{ links.total }},
										{{ locacao.total }},
										{{ instalacao.total }},
										{{ socios.total }}
										
                  ]
								}]
							},
							// Configuration options go here
							options: {}
						});
					</script>

        <hr>
        <hr>

    </div>

    <canvas id="densityChart" width="600" height="200">
      <script>
        var densityCanvas = document.getElementById("densityChart");

          Chart.defaults.global.defaultFontFamily = "Lato";
          Chart.defaults.global.defaultFontSize = 18;

          var densityData = {
            label: 'Density of Planet (kg/m3)',
            data: [
            {% for veiculos in mensalVeiculos %}
              '{{ veiculos.c }}',
            {% endfor %}
            ],
            backgroundColor: 'rgba(0, 99, 132, 0.6)',
            borderWidth: 0,
            yAxisID: "y-axis-density"
          };

          var gravityData = {
            label: 'Gravity of Planet (m/s2)',
            data: [3.7, 8.9, 9.8, 3.7, 23.1, 9.0, 8.7, 11.0],
            backgroundColor: 'rgba(99, 132, 0, 0.6)',
            borderWidth: 0,
            yAxisID: "y-axis-gravity"
          };

          var planetData = {
            labels: [
              
            {% for veiculos in mensalVeiculos %}
              '{{ veiculos.month|date:"F Y" }}',
            {% endfor %}
          
          
          ],
            datasets: [densityData, gravityData]
          };

          var chartOptions = {
            scales: {
              xAxes: [{
                barPercentage: 1,
                categoryPercentage: 0.6
              }],
              yAxes: [{
                id: "y-axis-density"
              }, {
                id: "y-axis-gravity"
              }]
            }
          };

          var barChart = new Chart(densityCanvas, {
            type: 'bar',
            data: planetData,
            options: chartOptions
          });
      </script>
    </canvas>
  
















  
<hr>


</div>
</div>
{% endblock %}