{% extends 'base.html' %}
{% load static %}

{% block title %}<title> .:: Terminais Ópticos </title> {% endblock %}

{% block main %}
<div class="container-xl">

	<!-- ---------------------------------------------------------------------------------   -->
	<!-- -->
	<div class="ui four stackable cards mt-3">

		<!-- As Primarias-->
		<div class="card ui green">
			<div class="content">
			  <div class="header">Primárias</div>
			  <div class="description">
				Localização das Primárias.
			  </div>
			  <div align="center">
				  <h1>( {{ quant_caixas_primarias }} )</h1>
			  </div>
			</div>
			<a href="/cto/primarias/" class="header">
				<div class="ui bottom attached button">
				<i class="hand point right icon"></i>
				Primárias
				</div>
			</a>
		  
		</div>

		<!-- Caixas de emendas-->
		<div class="card ui grey">
			<div class="content">
			  <div class="header">Caixas de Emendas</div>
			  <div class="description ui grey">
				Localização das caixas de emenda.
			  </div>
			  <div align="center">
				  <h1>( {{ quant_caixas_emenda }} )</h1>
			  </div>
			</div>
			<a href="/cto/caixas-emenda/" class="header">
				<div class="ui bottom attached button">
				<i class="hand point right icon"></i>
				Caixas Primárias
				</div>
			</a>
		</div>

		<!-- Caixas Cheias-->
		<div class="card ui red">
			<div class="content">
			  <div class="header">Caixas cheias</div>
			  <div class="description">
				Lista das caixas que já estão cheias.
			  </div>
			  <div align = "center">
				<h1>( {{ quant_cto_completas }} )</h1>
			  </div>
			</div>
			<a href="/cto/cto-completas/" class="header">
				<div class="ui bottom attached button">
				<i class="hand point right icon"></i>
				Caixas Cheias
				</div>
			</a>
		</div>

		<!-- Total de caixas cadastradas-->
		<div class="card ui blue">
			<div class="content">
			  <div class="header">Caixas Cadastradas</div>
			  <div class="description">
				Lista das caixas cadastradas.
			  </div>
			  <div align="center">
				  <h1>( {{ quant_cto_cadastradas }} )</h1>
			  </div>
			</div>
			<a href="#" class="header">
				<div class="ui bottom attached button">
				<i class="hand point right icon"></i>
				Total
				</div>
			</a>
		  </div>
	  </div>
	<!-- -->
	<!-- ---------------------------------------------------------------------------------   -->









	<!-- INÍCIO  Campo de Pesquisas-->
	<div class="mt-3">
		<form method="GET">
		   <div class="row">
			<div class="form-group col-8">
				<label for="ruas">Pesquisa:</label>
				<input type="search" class="form-control"  placeholder="Informe o código da caixa ou o nome da rua"
					   name="q" value="{{ request.GET.q }}">
			</div>

			<div class="form-group col-2">
				<label for="board">Borda:</label>
				<input type="search" class="form-control"  placeholder="Borda"
					   name="board" value="{{ request.GET.board }}">
			</div>

			<div class="form-group col-2">
				<label for="pon">Pon:</label>
				<input type="search" class="form-control"  placeholder="PON"
					   name="pon" value="{{ request.GET.pon }}">
			</div>


			   <div class="form-group col-12">
				   <button class=" form-control btn-success">
					<i class="fas fa-search"></i>
					Pesquisar
				</button>
			   </div>
		   </div>
	   </form>
	</div>

	<!-- FIM Campo de Pesquisas-->

	<hr><hr>
	<!--INÍCIO botões-->
	<div class="mt-4" align="right">
		<a href="adicionar-cto/" class="btn btn-primary">Adicionar CTO</a>
		<a href="exportar-csv-cto/" class="btn btn-info" title="Exportar CSV"><i class="fas fa-file-csv"></i></a>
	</div>
	<!--FIM botões -->

	<!--INÍCIO do Titulo da tabela -->
	<div class="mt-2">
		<hr><hr>
		<h5>Caixas de Terminais Ópticos ({{ quant_cto_filtradas }})</h5>
	</div>
	<!-- FIM do Titulo da tabela -->

	<!--INÍCIO da Tabela de Terminais Ópticos -->
	<div class="shadow  mt-3 table-responsive-sm">
		<table class="table"> 
			<thead>
			  <tr>
				<th scope="col">Rua</th>
				<th scope="col">Nº</th>
				<th scope="col">Bairro</th>
				<th scope="col">Código</th>
				<th scope="col">Board</th>
				<th scope="col">PON</th>
				<th scope="col">Total</th>
				<th scope="col">Usada</th>
				<th scope="col">Livre</th>
				<th scope="col">Opções</th>
			  </tr>
			</thead>
			<tbody>
				{% for cto in ctos %}
				<tr>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.rua_cto is null %} 0 {% else %} {{cto.rua_cto}} {% endif %}
					</td>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.numero_rua_cto is null %} 0 {% else %} {{cto.numero_rua_cto}} {% endif %}
					</td>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.bairro_cto is null %} 0 {% else %} {{cto.bairro_cto}} {% endif %}
					</td>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.codigo_cto is null %} 0 {% else %} {{cto.codigo_cto}} {% endif %}
					</td>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.board_cto is null %} 0 {% else %}	{{cto.board_cto}} {% endif %}
					</td>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.pon_cto is null %} 0 {% else %} {{cto.pon_cto}} {% endif %}
					</td>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.conexoes_opticas_cto is null %} 0 {% else %} {{cto.conexoes_opticas_cto}} {% endif %}
					</td>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.quant_conexoes_usadas_cto is null %} 0 {% else %} {{cto.quant_conexoes_usadas_cto}} {% endif %}
					</td>
					<td {% if cto.livre == 0 %} style="color:red;" {% endif %}>
						{% if cto.livre is null %} 0 {% else%} {{cto.livre}} {% endif %}
					</td>
					<td>
						<a href="editar-terminais-opticos/{{ cto.id }}" style="color:gold;" ><i class="fas fa-edit"></i></a>
					</td>
				</tr>						
				{% endfor %}
			</tbody>
		</table>
	</div>
	<!--FIM da Tabela de Terminais Ópticos -->
</div>
{% endblock %}