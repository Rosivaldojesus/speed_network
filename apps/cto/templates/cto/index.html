{% extends 'base.html' %}
{% load static %}

{% block title %}<title> Terminais </title> {% endblock %}

{% block main %}
<div class="container-xl">
	<!-- INÍCIO Dashboard Terminais Ópticos-->
	<div class="mt-3">
		<div class="card-group">
			<div class="card border-0">

				<div class="card-title shadow" align="center">
					<h5>Primárias</h5>
					<a href="/cto/primarias/" class="btn btn-block btn-success">Primárias</a>
				</div>
			 
			</div>
			
			<div class="card border-0">
				<div class="card-title shadow" align="center">
					<h5>Caixas de Emenda</h5>
					<a href="/cto/caixas-emenda/" class="btn btn-block btn-secondary"> Caixas Emenda </a>
				</div>
			</div>
			<div class="card border-0">
				<div class="card-title shadow" align="center">
					<h5>Total CTO</h5>
					<a href="#" class="btn  btn-block  btn-info"> Caixas cadastradas ( {{ quant_cto_cadastradas }} )</a>
				</div>
			</div>
			<div class="card border-0">
				<div class="card-title shadow" align="center">
					<h5>CTO Cheias</h5>
					<a href="/cto/cto-completas/" class="btn btn-block btn-danger"> Caixas cheias ( {{ quant_cto_completas }} )</a>
				</div>
			  </div>
		  </div>
	</div>
	<!-- FIM - Dashboard Terminais Ópticos-->

	<!-- INÍCIO  Campo de Pesquisas-->
	<div class="mt-3">
		<form method="GET">
		   <div class="row">
			<div class="form-group col-8">
				<label for="ruas">Pesquisa:</label>
				<input type="search" class="form-control"  placeholder="Informe o código da caixa ou o nome da rua"
					   name="q" value="{{ request.GET.q }}">
			</div>

			<div class="form-group col-2">
				<label for="board">Borda:</label>
				<input type="search" class="form-control"  placeholder="Borda"
					   name="board" value="{{ request.GET.board }}">
			</div>

			<div class="form-group col-2">
				<label for="pon">Pon:</label>
				<input type="search" class="form-control"  placeholder="PON"
					   name="pon" value="{{ request.GET.pon }}">
			</div>


		   
			   <div class="form-group col-12">
				   <button class=" form-control btn-success">
					<i class="fas fa-search"></i>
					Pesquisar
				</button>
			   </div>
		   </div>
	   </form>
	</div>


	<!-- FIM Campo de Pesquisas-->

	<hr><hr>
	<!--INÍCIO botões-->
	<div class="mt-4" align="right">
		<a href="adicionar-cto/" class="btn btn-primary">Adicionar CTO</a>
		<a href="exportar-csv-cto/" class="btn btn-info" title="Exportar CSV"><i class="fas fa-file-csv"></i></a>
	</div>
	<!--FIM botões -->

	<!--INÍCIO do Titulo da tabela -->
	<div class="mt-2">
		<hr><hr>
		<h5>Caixas de Terminais Ópticos ({{ quant_cto_filtradas }})</h5>
	</div>
	<!-- FIM do Titulo da tabela -->

	<!--INÍCIO da Tabela de Terminais Ópticos -->
	<div class="shadow  mt-3 table-responsive-sm">
		<table class="table"> 
			<thead>
			  <tr>
				<th scope="col">Rua</th>
				<th scope="col">Nº</th>
				<th scope="col">Board</th>
				<th scope="col">PON</th>
				<th scope="col">Total</th>
				<th scope="col">Usada</th>
				<th scope="col">Livre</th>
				<th scope="col">Opções</th>
			  </tr>
			</thead>
			<tbody>
				{% for cto in ctos %}
					{% if cto.livre == 0 %}
						<tr>
							<td style="color:red;">{{cto.rua_cto}}</td>
							<td style="color:red;">{{cto.numero_rua_cto}}</td>
							<td style="color:red;">{{cto.board_cto}}</td>
							<td style="color:red;">{{cto.pon_cto}}</td>
							<td style="color:red;">{{cto.conexoes_opticas_cto}}</td>
							<td style="color:red;">{{cto.quant_conexoes_usadas_cto}}</td>
							<td style="color:red;">{{cto.livre}}</td>
							<td>
								<a href="editar-terminais-opticos/{{ cto.id }}" style="color:gold;" ><i class="fas fa-edit"></i></a>
							</td>
						</tr>
					{% else %}
						<tr>
							<td>{{cto.rua_cto}}</td>
							<td>{{cto.numero_rua_cto}}</td>
							<td>{{cto.board_cto}}</td>
							<td>{{cto.pon_cto}}</td>
							<td>{{cto.conexoes_opticas_cto}}</td>
							<td>{{cto.quant_conexoes_usadas_cto}}</td>
							<td>{{cto.livre}}</td>
							<td>
								<a href="editar-terminais-opticos/{{ cto.id }}" style="color:gold;" ><i class="fas fa-edit"></i></a>
							</td>
						</tr>
					{% endif %}						
				{% endfor %}
			</tbody>
		</table>
	</div>
	<!--FIM da Tabela de Terminais Ópticos -->

</div>
	
{% endblock %}