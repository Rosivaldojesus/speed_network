{% extends 'base.html' %}

{% block main %}
  <div class="container">
    <!-- ********************************************************************************************** -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	<!-- ********************************************************************************************** -->




  <!-- STATUS DOS SERVIÇOS -->
  <div class="card border-0 mb-3 mt-3">
    <h5 class="card-header">Status Serviços</h5>
    <div class="card-body ">
      <div>
        <div class="card-deck ">
          <div class="card shadow-lg bg-danger">
            <div class="display-4 text-white pr-5  " align="right">
              <strong>{{ quant_servico_aberto }}</strong>
            </div>
            <div class=" text-white pl-4">
              <h3>Aguardando </h3>
            </div>
            <div align="right">
              <a href="servicos/servicos-abertos/" class="btn btn-danger">Ver todos</a>
            </div>
          </div>
          <div class="card shadow-lg bg-warning">
            <div class="display-4 text-white pr-5 " align="right">
              <strong>{{ quant_servico_agendado }}</strong>
            </div>
            <div class="text-white pl-4">
              <h3>Agendados</h3>
            </div>
            <div align="right">
              <a href="servicos/servicos-agendados/" class="btn btn-warning text-white">Ver todos</a>
            </div>
          </div>
          <div class="card shadow-lg bg-success">
            <div class="display-4 text-white pr-5 " align="right">
              <strong>{{ quant_servico_finalizados }}</strong>
            </div>
            <div class="text-white pl-4">
              <h3>Finalizados</h3>
            </div>
            <div align="right">
              <a href="servicos/servicos-finalizados/" class="btn btn-success">Ver todos</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- STATUS DOS INSTALAÇÃO -->
        <h5 class="mt-3">Status Instalações</h5>
          <div class="card-deck">
            <div class="card border-danger" align="center">
              <div class="card-group">
                <div class="card border-0">
                  <h5>Aberto</h5>
                </div>
                <div class="card border-0">
                  <div class="display-4"><strong>{{ quant_instalacao_aberta }}</strong></div>
                </div>
              </div>
              <div class="card-footer border-danger">
                <a href="vendas/instalacao-aberta/" class="btn btn-danger">Ver todos</a>
              </div>
            </div>
            <div class="card border-warning" align="center">
              <div class="card-group">
                <div class="card border-0">
                  <h5>Agendado</h5>
                </div>
                <div class="card border-0">
                  <div class="display-4"><strong>{{ quant_instalacao_agendada }}</strong></div>
                </div>
              </div>
              <div class="card-footer border-warning">
                <a href="vendas/instalacao-agendada/" class="btn btn-warning text-white">Ver todos</a>
              </div>
            </div>
            <!--
            <div class="card border-dark" align="center">
              <div class="card-group">
                <div class="card border-0">
                  <h5>Finalizados sem boletos</h5>
                </div>
                <div class="card border-0">
                  <div class="display-4"><strong>{{ quant_instalacao_concluida }}</strong></div>
                </div>
              </div>
              <div class="card-footer border-dark">
                <a href="vendas/instalacao-concluida/" class="btn btn-dark">Ver todos</a>
              </div>
            </div>
          -->
            <div class="card border-success" align="center">
              <div class="card-group">
                <div class="card border-0">
                  <h5>Finalizados</h5>
                </div>
                <div class="card border-0">
                  <div class="display-4"><strong>{{ quant_instalacao_concluida }}</strong></div>
                </div>
              </div>
              <div class="card-footer border-success">
                <a href="vendas/instalacao-concluida/" class="btn btn-success">Ver todos</a>
              </div>
            </div>
        </div>


      <section>
        <div class="card-deck mt-4">
          <div class="card border-0">
            <div style="color: purple">
              <h4>Instalaçãoes por dia </h4>
              <hr>
                </a>
              </h2>
            </div>
            <div class="card-body border-0" align="center">
      
              <canvas id="myChart" width="400" height="80"></canvas>
                <script>
                  var ctx = document.getElementById('myChart').getContext('2d');
                  var chart = new Chart(ctx, {
                    // The type of chart we want to create
                    type: 'bar',
                    // The data for our dataset
                    data: {
                      labels: [
                        {% for data in data %}
                        '{{ data.data_finalizacao |date:" d/m/Y"}}',
                        {% endfor %}
                        ],
                      datasets: [{
                        label: 'Instalaçoes por dia',
                        backgroundColor: 'rgb(0,0,128)',
                        borderColor: 'rgb(0,0,128)',
                        data: [
                        {% for data in data %}
                        '{{ data.number}}',
                        {% endfor %}
                          ]
                      }]
                    },
                    // Configuration options go here
                    options: {}
                  });
                </script>
          </div>
        </div>
      </section>



      <section>
        <!DOCTYPE html>
            <html>
            <head>
            <script>
            window.onload = function () {

            var chart = new CanvasJS.Chart("chartContainer", {
              exportEnabled: true,
              animationEnabled: true,
              title:{
                text: "Relação de serviços diários"
              },
              subtitles: [{
                text: "Clique na legenda para verificar dados"
              }], 
              axisX: {
                title: ""
              },
              axisY: {
                title: "Oil Filter - Units",
                titleFontColor: "#4F81BC",
                lineColor: "#4F81BC",
                labelFontColor: "#4F81BC",
                tickColor: "#4F81BC",
                includeZero: true
              },
              axisY2: {
                title: "Clutch - Units",
                titleFontColor: "#C0504E",
                lineColor: "#C0504E",
                labelFontColor: "#C0504E",
                tickColor: "#C0504E",
                includeZero: true
              },
              toolTip: {
                shared: true
              },
              legend: {
                cursor: "pointer",
                itemclick: toggleDataSeries
              },
              data: [{
                type: "column",
                name: "Intalações",
                showInLegend: true,      
                yValueFormatString: "#,##0.# Units",
                dataPoints: [
                {% for data in data %}
                  { label: "{{ data.data_finalizacao |date:" d/m/Y"}}",  y: {{ data.number}} },
                {% endfor %}
                ]
              },
              {
                type: "column",
                name: "Manutenções",
                axisYType: "secondary",
                showInLegend: true,
                yValueFormatString: "#,##0.# Units",
                dataPoints: [
                {% for data in dataServico %}
                { label: "{{ dataServico.data_finalizacao |date:" d/m/Y"}}",  y: {{ data.number}} },
                {% endfor %}
                ]
              }]
            });
            chart.render();

            function toggleDataSeries(e) {
              if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                e.dataSeries.visible = false;
              } else {
                e.dataSeries.visible = true;
              }
              e.chart.render();
            }

            }
            </script>
            </head>
            <body>
            <div id="chartContainer" style="height: 300px; width: 100%;"></div>
            <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
            </body>
            </html>
      </section>




    </div>




  </div>
{% endblock %}