{% extends 'base.html' %}
{% load static %}
{% load humanize %}

  <!-- ********************************************************************************************** -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	<!-- ********************************************************************************************** -->

{% block main %}
<div class="container-xl">

{% comment %} <div class="teste">Speed Network Telecom</div> {% endcomment %}

  <div class="row mt-4 mb-2 ">
    <!-- INÍCIO do campo principal a esquerda -->
    <div class="card border-0 col-sm-9 fundo-pagina">
      <!-- ------------------------------------------------------------------------------------------- -->
      {% if request.user.groups.all.0.name == "Master" %}
      <!-- INÍCIO Card de financeiro -->
      <!--
      {% if pagamentos_para_hoje >= 1 or pagamentos_atrasados >= 1  %}
        <div class="card mb-4 texto-cor-2" style="background: #B22222; color: white; ">
      {% else %}
        <div class="card mb-4 fundo-card texto-cor-2">
      {% endif %}
      -->
      <div class="card mb-4 fundo-card texto-cor-2">

        <div class="p-2 "><h1>Finanças</h1></div>
        <div class="card-body">

            <div class="card-deck">

              <div class="card border-0 fundo-card-dark fundo-card-border">
                <div> <h3 class="card-title p-2">Vencidas</h3> </div>
                <div align="center">
                  <h2>({{ pagamentos_atrasados }})</h2> 
                </div>
                <div class="p-2" align="right">
                  <a href="/pagamentos/contas-a-pagar/" class="btn btn-info">Visualizar</a>
                </div>
              </div>

              <div class="card border-0 fundo-card-dark fundo-card-border">
                <div><h3 class="card-title p-2">Hoje</h3></div>
                <div align="center">
                  <h2>({{ pagamentos_para_hoje }})</h2>
                </div>
                <div class="p-2" align="right">
                  <a href="/pagamentos/contas-a-pagar/" class="btn btn-info">Visualizar</a>
                </div>
              </div>

              <div class="card border-0 fundo-card-dark fundo-card-border">
                <div><h3 class="card-title p-2">Futuras</h3></div>
                <div align="center">
                  <h2>({{ pagamentos_para_vencer }})</h2>
                </div>
                <div class="p-2" align="right">
                  <a href="/pagamentos/contas-a-pagar/" class="btn btn-info">Visualizar</a>
                </div>
              </div>

            </div>
        </div>
      </div>
      <!-- INÍCIO Card de financeiro -->
      <!-- ------------------------------------------------------------------------------------------- -->
      {% endif %}
      
      <!-- ------------------------------------------------------------------------------------------- -->
      <!-- INÍCIO Card de Controle de Boletos -->
      <div class="card mb-4 p-2 fundo-card texto-cor-2">
        <div class="p-2"><h2>Controle de Boletos</h2> </div>
        <div class="row">
          <div class="col-sm-6">
            <div class="card fundo-card-dark">
              <div class="card-body">
                <h3 class="card-title">Instalações</h3>
                <div align="right">
                  <a href="/vendas/instalacao-finalizada-sem-boleto/" class="header btn btn-warning">Boletos - ({{ quant_instalacao_sem_boleto }})
                </a>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="card fundo-card-dark">
              <div class="card-body">
                <h3 class="card-title">Telefonia Voip</h3>
                <div align="right">
                    <a href="/voip/lista-voip-sem-boleto/" class="header btn btn-warning">Boletos - ({{ quantidade_voip_sem_boleto }})</a>
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- FIM Card de Controle de boletos  -->
      <!-- ------------------------------------------------------------------------------------------- -->

      <!-- ------------------------------------------------------------------------------------------- -->
      <!-- INÍCIO dos Status de Serviços -->


      <div class="card mb-4 fundo-card texto-cor-2">
        <div class="card-body">
          <h2 class="card-title">Status dos Serviços de manutenção</h2>

          <div class="card-deck">
            <div class="card fundo-card-dark">

              <div class="card-body">
                <h3 class="card-title">Esperando...</h3>
                <a href="servicos/servicos-abertos/" class="ui basic red button">Espera {{quant_servico_aberto}}</a>
              </div>

            </div>
            <div class="card fundo-card-dark">

              <div class="card-body">
                <h3 class="card-title">Agendados</h3>
                <a href="servicos/servicos-agendados/" class="ui basic yellow button">Agenda {{quant_servico_agendado}}</a>
              </div>

            </div>
            <div class="card fundo-card-dark">

              <div class="card-body">
                <h3 class="card-title">Concluídos</h3>
                <a href="servicos/servicos-finalizados/" class="ui basic green button">Concluído {{quant_servicos_finalizados_mes}}</a>
              </div>

            </div>
          </div>
          
          
        </div>
      </div>

       <!-- FIM dos Status de Serviços -->







      <!-- INÍCIO dos Status de Instalações -->


      <div class="card mb-4 fundo-card texto-cor-2">
        <div class="card-body">
          <h2 class="card-title">Status das instalações</h2>

          <div class="card-deck">
            <div class="card fundo-card-dark">

              <div class="card-body">
                <h3 class="card-title">Esperando...</h3>
                 <div align="right"> 
                  <a href="vendas/instalacao-aberta/" class="btn btn-danger">Espera {{quant_instalacao_aberta}}</a>
                </div>
              </div>

            </div>
            <div class="card fundo-card-dark">

              <div class="card-body">
                <h3 class="card-title">Agendados</h3>
                <div align="right">             
                  <a href="vendas/instalacao-agendada/" class="btn btn-warning">Agenda {{quant_instalacao_agendada}}</a>
                </div>
              </div>

            </div>
            <div class="card fundo-card-dark">

              <div class="card-body">
                <h3 class="card-title">Concluídos</h3>

                <div align="right">
                  <a href="vendas/instalacao-concluida/" class="btn btn-success">Concluído {{quant_instalacao_finalizados_mes}}</a>
                </div>
              </div>

            </div>
          </div>
          
          
        </div>
      </div>

       <!-- FIM dos Status de Instalaçoes -->
      <!-- ------------------------------------------------------------------------------------------- -->
  










      
  <!-- INÍCIO dos Serviços Voip -->

        <div class="card mb-4 fundo-card texto-cor-2">
        <div class="card-body">
          <h2 class="card-title">Serviços de Telefonia Voip</h2>

          <div class="card-deck">
            <div class="card fundo-card-dark">

              <div class="card-body">

                <a href="/voip/lista-voip-solicitados/" class="btn btn-primary w-100" >Solicitado ( {{ quantidade_voip_disponiveis }} )</a>
              </div>

            </div>
            <div class="card fundo-card-dark">

              <div class="card-body">

                                
                <a href="/voip/lista-voip-reservados/" class="btn btn-primary w-100">Reservados ( {{ quantidade_voip_reservados }} )</a>
              </div>

            </div>
            <div class="card fundo-card-dark">

              <div class="card-body">


                 <a href="/voip/lista-voip-sem-boleto/" class="btn btn-primary w-100">Sem Boletos ({{ quantidade_voip_sem_boleto }})</a>
              </div>

            </div>
          </div>
          
          
        </div>
      </div>

  <!-- FIM dos Serviços Voip -->


  <!-- INÍCIO  das últimas vendas-->
  <div class="card border-0  p-2 mb-3 fundo-card">
    <div class="card-header bg-dark text-white">Últimas vendas de instalações</div>
    <div class="card-group">
      <div class="card fundo-card">
        <div class="table-responsive table-striped table-sm">
          <table class="table caption-top">
            <caption>Últimos lançamentos</caption>
            <thead class="fundo-card texto-cor-2 thead-01">
              <tr>
                <th>Cliente</th>
                <th>Rua</th>
                <th>Bairro</th>
                <th>Vendedor</th>
              </tr>
            </thead>
            <tbody>
              {% for venda in ultimas_vendas %}
              <tr class="texto-tbody-tr">
                <td><small>{{ venda.nome_cliente }} {{ venda.sobrenome_cliente }}</small></td>
                <td><small>{{ venda.rua_cliente }}</small></td>
                <td><small>{{ venda.bairro_cliente }}</small></td>
                <td><small>{{ venda.instalacao_vendedor }}</small></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <!-- FIM das últimas vendas  -->

  </div>
  <!-- FIM do campo principal a esquerda -->
      
  <!-- INÍCIO do campo principal a direita -->
    <div class="card border-0 col-sm-3 fundo-pagina">
      <!-- INÍCIO Lista de serviços por dia -->
      <div class="card fundo-card fundo-card-border">
        <div class="card-header texto-cor-2">
          <h3>Serviços</h3>
        </div>
        <div class="card-body">
        
          {% for previsaoServico in previsaoServico %}
            {% if previsaoServico.number <= 4 %}
           <p href="#" style="color:Lime;" class="ml-2">{{ previsaoServico.data_agendada|naturalday|title  }}: {{ previsaoServico.number }}<p>
            {% elif previsaoServico.number > 4 and previsaoServico.number <= 6  %}
            <p style="color:orange;" class="ml-2">{{ previsaoServico.data_agendada|naturalday|title  }}: {{ previsaoServico.number }}<p>
            {% elif previsaoServico.number >= 7 %}
            <p style="color:red;" class="ml-2">{{ previsaoServico.data_agendada|naturalday|title  }}: {{ previsaoServico.number }}<p>
            {% endif%} 
          {% endfor %}
         
        </div>
      </div>
      <!-- INÍCIO Lista de serviços por dia -->
      <!-- *********************************************************************************************************  -->
      <!-- INÍCIO Lista de serviços por dia -->
      <div class="card mt-4 fundo-card fundo-card-border">
        <div class="card-header texto-cor-2">
          <h3>Instalações</h3>
        </div>
        <div class="card-body">

            {% for previsaoInstalacao in previsaoInstalacao %}
              {% if previsaoInstalacao.number <= 6 %}
              <p style="color:Lime;" class="ml-2">{{ previsaoInstalacao.data_instalacao|naturalday|title }}: {{ previsaoInstalacao.number }}</p>
              {% elif previsaoInstalacao.number > 6 and previsaoInstalacao.number <= 9  %}
              <p style="color:orange;" class="ml-2">{{ previsaoInstalacao.data_instalacao|naturalday|title }}: {{ previsaoInstalacao.number }}</p>
              {% elif previsaoInstalacao.number >= 10  %}
              <p style="color:red;" class="ml-2">{{ previsaoInstalacao.data_instalacao|naturalday|title}}: {{ previsaoInstalacao.number }}</p>
              {% endif %}
            {% endfor %}   

        </div>
      </div>
      <!-- INÍCIO Lista de serviços por dia -->


      



      
    </div>
    <!-- FIM do campo principal a direita -->
  </div>
</div>
{% endblock %}