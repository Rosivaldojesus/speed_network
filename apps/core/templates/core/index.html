{% extends 'base.html' %}
{% load static %}
{% load humanize %}

  <!-- ********************************************************************************************** -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	<!-- ********************************************************************************************** -->

{% block main %}
<div class="container-xl">   

  <div class="row mt-4 mb-2">
    <!-- INÍCIO do campo principal a esquerda -->
    <div class="card col-sm-9 border-0">
      <!-- ------------------------------------------------------------------------------------------- -->
      <!-- INÍCIO Card de financeiro -->
      <div class="ui link cards">
        <div class="card w-100">
          <div class="content" 
          {% if pagamentos_para_hoje >= 1 or pagamentos_atrasados >= 1  %}"
          style="background-color: red;" 
          {% endif %} 
        >
            <div class="header">
              Financeiro
            </div>
            <div class="meta">
              Financeiro da Speed Network Telecom
            </div>
            <div class="description">
              Informações referentes as contas a pagar
            </div>
          </div>
          <div class="extra content">
            <div class="ui three buttons">
              <div class="ui basic blue button">
                <a href="/pagamentos/agendamentos-pagamentos/">Vencidas  ({{ pagamentos_atrasados }})</a>
              </div>
              <div class="ui basic blue button">
                <a href="/pagamentos/agendamentos-pagamentos/">Hoje ({{pagamentos_para_hoje}})</a>
              </div>
              <div class="ui basic blue button">
                <a href="/pagamentos/agendamentos-pagamentos/">Futuros ({{pagamentos_para_vencer}})</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- INÍCIO Card de financeiro -->
      <!-- ------------------------------------------------------------------------------------------- -->
      
      <!-- ------------------------------------------------------------------------------------------- -->
      <!-- INÍCIO Card de Controle de Boletos -->
      <div class="ui card mt-3 w-100">
        <div class="content">
          <div class="header">Controle de Boletos</div>
          <div class="meta">Lista dos boletos a serem emetidos</div>
          <div class="description">
            <div class="ui two column grid row">
              <div class="column">
                <div class="ui fluid card">
                  <div class="image">
                    <i class="wifi icon"> </i>Instalações
                  </div>
                  <div class="content">
                    <a href="/vendas/instalacao-finalizada-sem-boleto/" class="header">
                      Boletos - ({{ quant_instalacao_sem_boleto }})
                    </a>
                  </div>
                </div>
              </div>
              <div class="column">
                <div class="ui fluid card">
                  <div class="image">
                    <i class="tty icon"></i> Voip
                  </div>
                  <div class="content">
                    <a href="/voip/lista-voip-sem-boleto/" class="header">
                      Boletos - ({{ quantidade_voip_sem_boleto }})

                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- FIM Card de Controle de boletos  -->
      <!-- ------------------------------------------------------------------------------------------- -->

      <!-- ------------------------------------------------------------------------------------------- -->
      <!-- INÍCIO dos Status de Serviços -->
      <div class="card-group">
        <div class="card">
          <!-- Staus de serviços -->
        <div class="column">
          <div class="ui fluid card">
            <div class="content">
              
              <div class="header">
                Status dos Serviços <i class="cogs icon"> </i>
              </div>
              <div class="meta">
                <P></P>
              </div>
              <div class="description">
                <p></p>
              </div>
            </div>
            <div class="extra content">
              <div class="ui three buttons">
                <a href="servicos/servicos-abertos/" class="ui basic red button">Espera - quant_servico_aberto</a>
                <a href="servicos/servicos-agendados/" class="ui basic yellow button">Agenda - quant_servico_agendado</a>
                <a href="servicos/servicos-finalizados/" class="ui basic green button">Concluído - quant_servico_finalizados</a>
              </div>
            </div>
          </div>
        </div> 
        </div>
        <!-- Status de instalaçoes-->
        <div class="card">
        <div class="column">
          <div class="ui fluid card">
            <div class="content">

              <div class="header">
                Status das instalaçoes <i class="wifi icon"> </i>
              </div>
              <div class="meta">
                <P></P>
              </div>
              <div class="description">
                <p></p>
              </div>
            </div>
            <div class="extra content">
              <div class="ui three buttons">
                <a href="vendas/instalacao-aberta/" class="ui basic red button">Espera - quant_instalacao_aberta</a>
                <a href="vendas/instalacao-agendada/" class="ui basic yellow button">Agenda - quant_instalacao_agendada</a>
                <a href="vendas/instalacao-concluida/" class="ui basic green button">Concluído -quant_instalacao_concluida</a>
              </div>
            </div>
          </div>
        </div>
        </div>
      </div>
      <!-- INÍCIO dos Status de Serviços -->
      <!-- ------------------------------------------------------------------------------------------- -->
  










      
  <!-- INÍCIO dos Serviços Voip -->
    <div class="card mt-4">
        <h5 class="card-header">Status dos Serviços Voip</h5>
      

            <div class="row">
              <div class="col-sm-4">
                <div class="card border-0">
                  <div class="card-body">
    
                    <a href="/voip/lista-voip-solicitados/" class="btn btn-primary w-100" >Solicitado ( {{ quantidade_voip_disponiveis }}</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card border-0">
                  <div class="card-body">

                    <a href="/voip/lista-voip-reservados/" class="btn btn-primary w-100">Reservados ( {{ quantidade_voip_reservados }} )</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card border-0">
                  <div class="card-body">

                    <a href="/voip/lista-voip-sem-boleto/" class="btn btn-primary w-100">Sem Boletos ({{ quantidade_voip_sem_boleto }})</a>
                  </div>
                </div>
              </div>
            </div>
       
        <!--
        <div class="card-body">
          <h5 class="card-title">Portabilidade</h5>
          <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
          <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
        -->
    </div>
  <!-- FIM dos Serviços Voip -->

  <!-- INICIO - Instalaçãoes por técnico -->
      <div class="card w-100 border-0 shadow p-2 mb-3 mt-4">
        <div class="card-header bg-dark text-white">Instalações agendadas por Técnico</div>
        <div class="card-body">
          <!--SERVIÇOS POR CADA TÉCNICO-->
          <div class="table-responsive table-striped table-sm">
            <table class="table caption-top">
              <thead>
                <tr>
                  <th>Técnico</th>
                  <th>Cliente</th>
                  <th>Rua</th>
                  <th>Nº</th>
                  <th>Data</th>
                </tr>
              </thead>
              <tbody>
                {% for responsavel in responsavel_instalacao%}
                    {% if responsavel.funcionario_instalacao is null %}
                    <p></p>
                    {% else %}
                    <tr>
                      <td><small>{{ responsavel.funcionario_instalacao.get_full_name }}</small></td>
                      <td><small>{{ responsavel.nome_cliente }}</small></td>
                      <td><small>{{ responsavel.rua_cliente }}</small></td>
                      <td><small>{{ responsavel.numero_endereco_cliente }}</small></td>
                      <td><small>{{ responsavel.data_instalacao|date:"D d"}} - {{ responsavel.hora_instalacao|time:"H:i"  }}</small></td>
                    </tr>
                    {% endif %}
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
  <!-- FIM - Instalaçãoes por técnico -->

  <!-- INÍCIO  das últimas vendas-->
  <div class="card border-0 shadow p-2 mb-3">
    <div class="card-header bg-dark text-white">Últimas vendas de instalações</div>
    <div class="card-group">
      <div class="card">
        <div class="table-responsive table-striped table-sm">
          <table class="table caption-top">
            <caption>Últimos lançamentos</caption>
            <thead>
              <tr>
                <th>Cliente</th>
                <th>Rua</th>
                <th>Bairro</th>
                <th>Vendedor</th>
              </tr>
            </thead>
            <tbody>
              {% for venda in ultimas_vendas %}
              <tr>
                <td><small>{{ venda.nome_cliente }}</small></td>
                <td><small>{{ venda.rua_cliente }}</small></td>
                <td><small>{{ venda.bairro_cliente }}</small></td>
                <td><small>{{ venda.instalacao_vendedor }}</small></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <!-- FIM das últimas vendas  -->

  </div>
  <!-- FIM do campo principal a esquerda -->
      
  <!-- INÍCIO do campo principal a direita -->
    <div class="card col-sm-3 border-0">
      <!-- INÍCIO Lista de serviços por dia -->
      <div class="card">
        <div class="card-header">
          Serviços
        </div>
        <div class="card-body">
        
          {% for previsaoServico in previsaoServico %}
            {% if previsaoServico.number <= 4 %}
           <p href="#" style="color:green;" class="ml-2">{{ previsaoServico.data_agendada|naturalday|title  }}: {{ previsaoServico.number }}<p>
            {% elif previsaoServico.number > 4 and previsaoServico.number <= 6  %}
            <p style="color:orange;" class="ml-2">{{ previsaoServico.data_agendada|naturalday|title  }}: {{ previsaoServico.number }}<p>
            {% elif previsaoServico.number >= 7 %}
            <p style="color:red;" class="ml-2">{{ previsaoServico.data_agendada|naturalday|title  }}: {{ previsaoServico.number }}<p>
            {% endif%} 
          {% endfor %}
         
        </div>
      </div>
      <!-- INÍCIO Lista de serviços por dia -->
      <!-- *********************************************************************************************************  -->
      <!-- INÍCIO Lista de serviços por dia -->
      <div class="card mt-4">
        <div class="card-header">
          Instalações
        </div>
        <div class="card-body">

            {% for previsaoInstalacao in previsaoInstalacao %}
              {% if previsaoInstalacao.number <= 6 %}
              <p style="color:green;" class="ml-2">{{ previsaoInstalacao.data_instalacao|naturalday|title }}: {{ previsaoInstalacao.number }}</p>
              {% elif previsaoInstalacao.number > 6 and previsaoInstalacao.number <= 9  %}
              <p style="color:orange;" class="ml-2">{{ previsaoInstalacao.data_instalacao|naturalday|title }}: {{ previsaoInstalacao.number }}</p>
              {% elif previsaoInstalacao.number >= 10  %}
              <p style="color:red;" class="ml-2">{{ previsaoInstalacao.data_instalacao|naturalday|title}}: {{ previsaoInstalacao.number }}</p>
              {% endif %}
            {% endfor %}   

        </div>
      </div>
      <!-- INÍCIO Lista de serviços por dia -->


      



      
    </div>
    <!-- FIM do campo principal a direita -->
  </div>
</div>
{% endblock %}