{% extends 'base.html' %}


  <!-- ********************************************************************************************** -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	<!-- ********************************************************************************************** -->

{% block main %}

<div class="container-xl">
  
  <div class="card-group mt-2">
    <!-- INÍCIO LADO ESQUERDO -->
    <div class="card col-sm-9 border-0">
      <!-- INÍCIO Status Serviços-->
      <h5 class="card-title">Status Serviços</h5>
      <div class="row row-cols-1 row-cols-md-3 g-4">
        <div class="col shadow">
          <h5 class="card-title">Aguardando: ( <strong>{{ quant_servico_aberto }}</strong> ) 
            <a href="servicos/servicos-abertos/" class="btn btn-danger w-100">Ver todos</a>
        </div>
        <div class="col shadow">
          <h5 class="card-title">Agendados: ( <strong>{{ quant_servico_agendado }}</strong> )
            <a href="servicos/servicos-agendados/" class="btn btn-warning text-white w-100">Ver todos</a>
        </div>
        <div class="col shadow">
          <h5 class="card-title">Finalizados:( <strong> {{ quant_servicos_finalizados_mes }}</strong> )
            <a href="servicos/servicos-finalizados/" class="btn btn-success text-white w-100">Ver todos</a>
        </div>
      </div>
      <!-- FIM Status Serviços-->
        <hr><hr>
      <!-- INÍCIO Status Instalações-->
      <h5 class="card-title">Status Instalaçoes</h5>
      <div class="row">
        <div class="col shadow">
          <h6>Aberto: ( <strong>{{ quant_instalacao_aberta }}</strong> )</h6>
          <a href="vendas/instalacao-aberta/" class="btn btn-danger w-100">Ver todos</a>
        </div>
        <div class="col shadow">
          <h6>Agendado: ( <strong>{{ quant_instalacao_agendada }}</strong> )</h6>
          <a href="vendas/instalacao-agendada/" class="btn btn-warning text-white w-100">Ver todos</a>
        </div>
        <div class="col shadow">
          <h6>Boletos: ( <strong>{{ quant_instalacao_sem_boleto }}</strong> )</h6>
          <a href="vendas/instalacao-finalizada-sem-boleto/" class="btn btn-dark w-100">Ver todos </a>
        </div>
        <div class="col shadow">
          <h6>Finalizados( <strong>{{ quant_instalacao_finalizados_mes }}</strong> )</h6>
          <a href="vendas/instalacao-concluida/" class="btn btn-success w-100">Ver todos</a>
        </div>
      </div>
      <!-- FIM Status Instalações-->
      <hr><hr>
      <!-- INÍCIO Serviços de Voip-->
      <h5 class="card-title">Serviços VOIP</h5>
      <div class="row row-cols-1 row-cols-md-3 g-4">
        <div class="col shadow" >
          <nav class="nav nav-pills flex-column flex-sm-row">
            <a class="flex-sm-fill text-sm-center nav-link active" href="/servicos/servicos-voip/">
              VOIP Disponiveis ( {{ voipDisponiveis }} )
            </a>
          </nav>
        </div>
        <div class="col shadow">
          <nav class="nav nav-pills flex-column flex-sm-row">
            <a class="flex-sm-fill text-sm-center nav-link active" href="/servicos/servicos-voip/">
              Reservados ( {{ voipReservados }} )
            </a>
          </nav>
        </div>
        <div class="col shadow">
          <nav class="nav nav-pills flex-column flex-sm-row">
            <a class="flex-sm-fill text-sm-center nav-link active" href="/servicos/servicos-voip/">
              Em portabilidade( {{ voipPortabilidade }} )
            </a>
          </nav>
        </div>
      </div>
    <!-- FIM Serviços de Voip-->

       <hr><hr>

    <!-- INÍCIO Instalações agendadas por Técnico  -->
      <div class="card w-100 border-0 shadow p-2 mb-3">
        <div class="card-header bg-dark text-white">Instalações agendadas por Técnico</div>
        <div class="card-body">
          <!--SERVIÇOS POR CADA TÉCNICO-->
          <div class="table-responsive table-striped table-sm">
            <table class="table caption-top">
              <thead>
                <tr>
                  <th>Técnico</th>
                  <th>Cliente</th>
                  <th>Rua</th>
                  <th>Nº</th>
                  <th>Data</th>
                </tr>
              </thead>
              <tbody>
                {% for responsavel in responsavel_instalacao%}
                    {% if responsavel.funcionario_instalacao is null %}
                    <p></p>
                    {% else %}
                    <tr>
                      <td><small>{{ responsavel.funcionario_instalacao.get_full_name }}</small></td>
                      <td><small>{{ responsavel.nome_cliente }}</small></td>
                      <td><small>{{ responsavel.rua_cliente }}</small></td>
                      <td><small>{{ responsavel.numero_endereco_cliente }}</small></td>
                      <td><small>{{ responsavel.data_instalacao|date:"D d"}} - {{ responsavel.hora_instalacao|time:"H:i"  }}</small></td>
                    </tr>
                    {% endif %}
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    <!-- FIM Instalações agendadas por Técnico  -->

    <!-- INÍCIO  das últimas vendas-->
      <div class="card border-0 shadow p-2 mb-3">
        <div class="card-header bg-dark text-white">Últimas vendas de instalações</div>
        <div class="card-group">
          <div class="card">
            <div class="table-responsive table-striped table-sm">
              <table class="table caption-top">
                <caption>Últimos lançamentos</caption>
                <thead>
                  <tr>
                    <th>Cliente</th>
                    <th>Rua</th>
                    <th>Bairro</th>
                    <th>Vendedor</th>
                  </tr>
                </thead>
                <tbody>
                  {% for venda in ultimas_vendas %}
                  <tr>
                    <td><small>{{ venda.nome_cliente }}</small></td>
                    <td><small>{{ venda.rua_cliente }}</small></td>
                    <td><small>{{ venda.bairro_cliente }}</small></td>
                    <td><small>{{ venda.instalacao_vendedor }}</small></td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
  <!-- FIM das últimas vendas  -->
    </div>
    <!-- FIM LADO ESQUERDO -->
    <!--
      ********************************************************************************************************
    -->
    <!-- INÍCIO LADO DIREITO -->
    <div class="card col-sm-3 border-0" style="background-color:Gainsboro;">
      <!-- INÍCIO Status dos Serviços -->
      <div class="card shadow-sm border-0 mt-2">
        <h5 class="card-title ml-2">Serviços</h5>
        {% for previsaoServico in previsaoServico %}
            {% if previsaoServico.number <= 4 %}
            <h6 href="#" style="color:green;" class="ml-2"><strong>{{ previsaoServico.data_agendada  }}: {{ previsaoServico.number }}</strong></h6>
            {% elif previsaoServico.number > 4 and previsaoServico.number <= 6  %}
            <h6 style="color:orange;" class="ml-2"><strong>{{ previsaoServico.data_agendada  }}: {{ previsaoServico.number }}</strong></h6>
            {% elif previsaoServico.number >= 7 %}
            <h6 style="color:red;" class="ml-2"><strong>{{ previsaoServico.data_agendada  }}: {{ previsaoServico.number }}</strong></h6>
            {% endif%} 
          {% endfor %}
      </div>
      <!-- FIM Status dos Serviços -->
      <hr>
      <!-- INÍCIO Status das Instalações -->
      <div class="card shadow-sm border-0 mb-2">
        <h5 class="card-title ml-2">Instalações</h5>
        {% for previsaoInstalacao in previsaoInstalacao %}
            {% if previsaoInstalacao.number <= 6 %}
            <h6 style="color:green;" class="ml-2"><strong>{{ previsaoInstalacao.data_instalacao }}: {{ previsaoInstalacao.number }}</strong></h6>
            {% elif previsaoInstalacao.number > 6 and previsaoInstalacao.number <= 9  %}
            <h6 style="color:orange;" class="ml-2"><strong>{{ previsaoInstalacao.data_instalacao }}: {{ previsaoInstalacao.number }}</strong></h6>
            {% elif previsaoInstalacao.number >= 10  %}
            <h6 style="color:red;" class="ml-2"><strong>{{ previsaoInstalacao.data_instalacao }}: {{ previsaoInstalacao.number }}</strong></h6>
            {% endif %}
        {% endfor %}   
      </div>
      <!-- FIM Status das Instalações -->
    </div>
    <!-- FIM LADO DIREITO -->
  </div>
</div>
{% endblock %}